<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Exploring Data with the Tidyverse Packages | Data Science for Water Professionals - Create Value from Data with the R Language</title>
  <meta name="description" content="Data science course for water management professionals using the R language. This course is developed for water professionals with little to no experience in writing code to analyse data." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Exploring Data with the Tidyverse Packages | Data Science for Water Professionals - Create Value from Data with the R Language" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://lucidmanager.org/r4h2o" />
  <meta property="og:image" content="https://lucidmanager.org/r4h2o/images/r4h2o-cover.jpg" />
  <meta property="og:description" content="Data science course for water management professionals using the R language. This course is developed for water professionals with little to no experience in writing code to analyse data." />
  <meta name="github-repo" content="pprevos/r4h2o" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Exploring Data with the Tidyverse Packages | Data Science for Water Professionals - Create Value from Data with the R Language" />
  
  <meta name="twitter:description" content="Data science course for water management professionals using the R language. This course is developed for water professionals with little to no experience in writing code to analyse data." />
  <meta name="twitter:image" content="https://lucidmanager.org/r4h2o/images/r4h2o-cover.jpg" />

<meta name="author" content="Dr Peter Prevos" />


<meta name="date" content="2021-11-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basics.html"/>
<link rel="next" href="statistics.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science for Water Professionals</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#learning-objectives"><i class="fa fa-check"></i><b>1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#case-study-approach"><i class="fa fa-check"></i><b>1.3</b> Case Study approach</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#case-study-1-water-quality-regulations"><i class="fa fa-check"></i><b>1.3.1</b> Case Study 1: Water Quality Regulations</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#case-study-2-customer-experience"><i class="fa fa-check"></i><b>1.3.2</b> Case Study 2: Customer Experience</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="datascience.html"><a href="datascience.html"><i class="fa fa-check"></i><b>2</b> Principles of Water Utility Data Science</a>
<ul>
<li class="chapter" data-level="2.1" data-path="datascience.html"><a href="datascience.html#what-is-data-science"><i class="fa fa-check"></i><b>2.1</b> What is data science?</a></li>
<li class="chapter" data-level="2.2" data-path="datascience.html"><a href="datascience.html#the-elements-of-data-science"><i class="fa fa-check"></i><b>2.2</b> The Elements of Data Science</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="datascience.html"><a href="datascience.html#domain-knowledge"><i class="fa fa-check"></i><b>2.2.1</b> Domain Knowledge</a></li>
<li class="chapter" data-level="2.2.2" data-path="datascience.html"><a href="datascience.html#mathematical-knowledge"><i class="fa fa-check"></i><b>2.2.2</b> Mathematical Knowledge</a></li>
<li class="chapter" data-level="2.2.3" data-path="datascience.html"><a href="datascience.html#computer-science"><i class="fa fa-check"></i><b>2.2.3</b> Computer Science</a></li>
<li class="chapter" data-level="2.2.4" data-path="datascience.html"><a href="datascience.html#the-unicorn-data-scientist"><i class="fa fa-check"></i><b>2.2.4</b> The Unicorn Data Scientist?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="datascience.html"><a href="datascience.html#the-water-data-value-chain-the-digital-water-utility"><i class="fa fa-check"></i><b>2.3</b> The Water-Data Value Chain: The Digital Water Utility</a></li>
<li class="chapter" data-level="2.4" data-path="datascience.html"><a href="datascience.html#data-science-tools"><i class="fa fa-check"></i><b>2.4</b> Data Science Tools</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="datascience.html"><a href="datascience.html#spreadsheets"><i class="fa fa-check"></i><b>2.4.1</b> Spreadsheets</a></li>
<li class="chapter" data-level="2.4.2" data-path="datascience.html"><a href="datascience.html#business-intelligence-systems"><i class="fa fa-check"></i><b>2.4.2</b> Business Intelligence Systems</a></li>
<li class="chapter" data-level="2.4.3" data-path="datascience.html"><a href="datascience.html#data-science-code"><i class="fa fa-check"></i><b>2.4.3</b> Data science code</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="datascience.html"><a href="datascience.html#good-data-science"><i class="fa fa-check"></i><b>2.5</b> Good Data Science</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="datascience.html"><a href="datascience.html#data-science-trivium"><i class="fa fa-check"></i><b>2.5.1</b> Data Science Trivium</a></li>
<li class="chapter" data-level="2.5.2" data-path="datascience.html"><a href="datascience.html#useful-data-science"><i class="fa fa-check"></i><b>2.5.2</b> Useful Data Science</a></li>
<li class="chapter" data-level="2.5.3" data-path="datascience.html"><a href="datascience.html#reality"><i class="fa fa-check"></i><b>2.5.3</b> Reality</a></li>
<li class="chapter" data-level="2.5.4" data-path="datascience.html"><a href="datascience.html#data"><i class="fa fa-check"></i><b>2.5.4</b> Data</a></li>
<li class="chapter" data-level="2.5.5" data-path="datascience.html"><a href="datascience.html#information"><i class="fa fa-check"></i><b>2.5.5</b> Information</a></li>
<li class="chapter" data-level="2.5.6" data-path="datascience.html"><a href="datascience.html#knowledge"><i class="fa fa-check"></i><b>2.5.6</b> Knowledge</a></li>
<li class="chapter" data-level="2.5.7" data-path="datascience.html"><a href="datascience.html#feedback-loop"><i class="fa fa-check"></i><b>2.5.7</b> Feedback Loop</a></li>
<li class="chapter" data-level="2.5.8" data-path="datascience.html"><a href="datascience.html#sound-data-science"><i class="fa fa-check"></i><b>2.5.8</b> Sound Data Science</a></li>
<li class="chapter" data-level="2.5.9" data-path="datascience.html"><a href="datascience.html#aesthetic-data-science"><i class="fa fa-check"></i><b>2.5.9</b> Aesthetic Data Science</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="datascience.html"><a href="datascience.html#best-practice-data-science-with-r"><i class="fa fa-check"></i><b>2.6</b> Best-Practice Data Science with R</a></li>
<li class="chapter" data-level="2.7" data-path="datascience.html"><a href="datascience.html#further-study"><i class="fa fa-check"></i><b>2.7</b> Further Study</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>3</b> Introduction to the R Language</a>
<ul>
<li class="chapter" data-level="3.1" data-path="basics.html"><a href="basics.html#the-r-language"><i class="fa fa-check"></i><b>3.1</b> The R Language</a></li>
<li class="chapter" data-level="3.2" data-path="basics.html"><a href="basics.html#basic-principles-of-programming"><i class="fa fa-check"></i><b>3.2</b> Basic principles of programming</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="basics.html"><a href="basics.html#understanding-computer-code"><i class="fa fa-check"></i><b>3.2.1</b> Understanding computer code</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="basics.html"><a href="basics.html#debugging-code"><i class="fa fa-check"></i><b>3.3</b> Debugging Code</a></li>
<li class="chapter" data-level="3.4" data-path="basics.html"><a href="basics.html#using-r-and-rstudio"><i class="fa fa-check"></i><b>3.4</b> Using R and RStudio</a></li>
<li class="chapter" data-level="3.5" data-path="basics.html"><a href="basics.html#basics-of-the-r-language"><i class="fa fa-check"></i><b>3.5</b> Basics of the R language</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="basics.html"><a href="basics.html#arithmetic"><i class="fa fa-check"></i><b>3.5.1</b> Arithmetic</a></li>
<li class="chapter" data-level="3.5.2" data-path="basics.html"><a href="basics.html#variables"><i class="fa fa-check"></i><b>3.5.2</b> Variables</a></li>
<li class="chapter" data-level="3.5.3" data-path="basics.html"><a href="basics.html#vectors"><i class="fa fa-check"></i><b>3.5.3</b> Vectors</a></li>
<li class="chapter" data-level="3.5.4" data-path="basics.html"><a href="basics.html#basic-plots"><i class="fa fa-check"></i><b>3.5.4</b> Basic plots</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="basics.html"><a href="basics.html#rstudio-scripts-and-projects"><i class="fa fa-check"></i><b>3.6</b> RStudio scripts and projects</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="basics.html"><a href="basics.html#finding-help"><i class="fa fa-check"></i><b>3.6.1</b> Finding help</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="basics.html"><a href="basics.html#quiz-1-calculating-channel-flows"><i class="fa fa-check"></i><b>3.7</b> Quiz 1: Calculating channel flows</a></li>
<li class="chapter" data-level="3.8" data-path="basics.html"><a href="basics.html#further-study-1"><i class="fa fa-check"></i><b>3.8</b> Further Study</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>4</b> Exploring Data with the Tidyverse Packages</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tidyverse.html"><a href="tidyverse.html#r-libraries"><i class="fa fa-check"></i><b>4.1</b> R Libraries</a></li>
<li class="chapter" data-level="4.2" data-path="tidyverse.html"><a href="tidyverse.html#introducing-the-tidyverse"><i class="fa fa-check"></i><b>4.2</b> Introducing the Tidyverse</a></li>
<li class="chapter" data-level="4.3" data-path="tidyverse.html"><a href="tidyverse.html#case-study-1"><i class="fa fa-check"></i><b>4.3</b> Case Study 1</a></li>
<li class="chapter" data-level="4.4" data-path="tidyverse.html"><a href="tidyverse.html#exploring-the-case-study-data"><i class="fa fa-check"></i><b>4.4</b> Exploring the Case Study Data</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="tidyverse.html"><a href="tidyverse.html#inspect-the-data"><i class="fa fa-check"></i><b>4.4.1</b> Inspect the data</a></li>
<li class="chapter" data-level="4.4.2" data-path="tidyverse.html"><a href="tidyverse.html#explore-the-data"><i class="fa fa-check"></i><b>4.4.2</b> Explore the data</a></li>
<li class="chapter" data-level="4.4.3" data-path="tidyverse.html"><a href="tidyverse.html#explore-variables"><i class="fa fa-check"></i><b>4.4.3</b> Explore variables</a></li>
<li class="chapter" data-level="4.4.4" data-path="tidyverse.html"><a href="tidyverse.html#filtering-data"><i class="fa fa-check"></i><b>4.4.4</b> Filtering data</a></li>
<li class="chapter" data-level="4.4.5" data-path="tidyverse.html"><a href="tidyverse.html#counting-results"><i class="fa fa-check"></i><b>4.4.5</b> Counting results</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="tidyverse.html"><a href="tidyverse.html#quiz-2-exploring-water-quality-data"><i class="fa fa-check"></i><b>4.5</b> Quiz 2: Exploring Water Quality Data</a></li>
<li class="chapter" data-level="4.6" data-path="tidyverse.html"><a href="tidyverse.html#further-study-2"><i class="fa fa-check"></i><b>4.6</b> Further Study</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="statistics.html"><a href="statistics.html"><i class="fa fa-check"></i><b>5</b> Descriptive Statistics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="statistics.html"><a href="statistics.html#problem-statement"><i class="fa fa-check"></i><b>5.1</b> Problem Statement</a></li>
<li class="chapter" data-level="5.2" data-path="statistics.html"><a href="statistics.html#analyse-the-data"><i class="fa fa-check"></i><b>5.2</b> Analyse the Data</a></li>
<li class="chapter" data-level="5.3" data-path="statistics.html"><a href="statistics.html#calculating-percentiles"><i class="fa fa-check"></i><b>5.3</b> Calculating Percentiles</a></li>
<li class="chapter" data-level="5.4" data-path="statistics.html"><a href="statistics.html#analysing-grouped-data"><i class="fa fa-check"></i><b>5.4</b> Analysing Grouped Data</a></li>
<li class="chapter" data-level="5.5" data-path="statistics.html"><a href="statistics.html#quiz-3-analysing-water-quality-data"><i class="fa fa-check"></i><b>5.5</b> Quiz 3: Analysing Water Quality Data</a></li>
<li class="chapter" data-level="5.6" data-path="statistics.html"><a href="statistics.html#further-study-3"><i class="fa fa-check"></i><b>5.6</b> Further Study</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ggplot.html"><a href="ggplot.html"><i class="fa fa-check"></i><b>6</b> Visualising Data with ggplot2</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ggplot.html"><a href="ggplot.html#principles-of-visualisation"><i class="fa fa-check"></i><b>6.1</b> Principles of Visualisation</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="ggplot.html"><a href="ggplot.html#the-aesthetics-of-visualising-data"><i class="fa fa-check"></i><b>6.1.1</b> The aesthetics of visualising data</a></li>
<li class="chapter" data-level="6.1.2" data-path="ggplot.html"><a href="ggplot.html#telling-stories"><i class="fa fa-check"></i><b>6.1.2</b> Telling Stories</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ggplot.html"><a href="ggplot.html#visualising-data-with-ggplot"><i class="fa fa-check"></i><b>6.2</b> Visualising data with ggplot</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="ggplot.html"><a href="ggplot.html#aesthetics"><i class="fa fa-check"></i><b>6.2.1</b> Aesthetics</a></li>
<li class="chapter" data-level="6.2.2" data-path="ggplot.html"><a href="ggplot.html#geometries"><i class="fa fa-check"></i><b>6.2.2</b> Geometries</a></li>
<li class="chapter" data-level="6.2.3" data-path="ggplot.html"><a href="ggplot.html#facets"><i class="fa fa-check"></i><b>6.2.3</b> Facets</a></li>
<li class="chapter" data-level="6.2.4" data-path="ggplot.html"><a href="ggplot.html#statistics-1"><i class="fa fa-check"></i><b>6.2.4</b> Statistics</a></li>
<li class="chapter" data-level="6.2.5" data-path="ggplot.html"><a href="ggplot.html#coordinates"><i class="fa fa-check"></i><b>6.2.5</b> Coordinates</a></li>
<li class="chapter" data-level="6.2.6" data-path="ggplot.html"><a href="ggplot.html#themes"><i class="fa fa-check"></i><b>6.2.6</b> Themes</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="ggplot.html"><a href="ggplot.html#sharing-visualisations"><i class="fa fa-check"></i><b>6.3</b> Sharing visualisations</a></li>
<li class="chapter" data-level="6.4" data-path="ggplot.html"><a href="ggplot.html#assignment"><i class="fa fa-check"></i><b>6.4</b> Assignment</a></li>
<li class="chapter" data-level="6.5" data-path="ggplot.html"><a href="ggplot.html#further-study-4"><i class="fa fa-check"></i><b>6.5</b> Further Study</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dataproducts.html"><a href="dataproducts.html"><i class="fa fa-check"></i><b>7</b> Creating Data Products</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dataproducts.html"><a href="dataproducts.html#data-science-workflow"><i class="fa fa-check"></i><b>7.1</b> Data Science Workflow</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="dataproducts.html"><a href="dataproducts.html#define"><i class="fa fa-check"></i><b>7.1.1</b> Define</a></li>
<li class="chapter" data-level="7.1.2" data-path="dataproducts.html"><a href="dataproducts.html#prepare"><i class="fa fa-check"></i><b>7.1.2</b> Prepare</a></li>
<li class="chapter" data-level="7.1.3" data-path="dataproducts.html"><a href="dataproducts.html#understand"><i class="fa fa-check"></i><b>7.1.3</b> Understand</a></li>
<li class="chapter" data-level="7.1.4" data-path="dataproducts.html"><a href="dataproducts.html#communicate"><i class="fa fa-check"></i><b>7.1.4</b> Communicate</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="dataproducts.html"><a href="dataproducts.html#reproducible-research"><i class="fa fa-check"></i><b>7.2</b> Reproducible Research</a></li>
<li class="chapter" data-level="7.3" data-path="dataproducts.html"><a href="dataproducts.html#r-markdown"><i class="fa fa-check"></i><b>7.3</b> R-Markdown</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="dataproducts.html"><a href="dataproducts.html#formatting-tables"><i class="fa fa-check"></i><b>7.3.1</b> Formatting tables</a></li>
<li class="chapter" data-level="7.3.2" data-path="dataproducts.html"><a href="dataproducts.html#presenting-numbers"><i class="fa fa-check"></i><b>7.3.2</b> Presenting numbers</a></li>
<li class="chapter" data-level="7.3.3" data-path="dataproducts.html"><a href="dataproducts.html#export-formats"><i class="fa fa-check"></i><b>7.3.3</b> Export formats</a></li>
<li class="chapter" data-level="7.3.4" data-path="dataproducts.html"><a href="dataproducts.html#sharing-results-online"><i class="fa fa-check"></i><b>7.3.4</b> Sharing results online</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="dataproducts.html"><a href="dataproducts.html#mini-hackathon"><i class="fa fa-check"></i><b>7.4</b> Mini Hackathon</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>8</b> Cleaning Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="cleaning.html"><a href="cleaning.html#case-study-2"><i class="fa fa-check"></i><b>8.1</b> Case Study 2</a></li>
<li class="chapter" data-level="8.2" data-path="cleaning.html"><a href="cleaning.html#cleaning-data"><i class="fa fa-check"></i><b>8.2</b> Cleaning data</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="cleaning.html"><a href="cleaning.html#load-and-explore-the-data"><i class="fa fa-check"></i><b>8.2.1</b> Load and explore the data</a></li>
<li class="chapter" data-level="8.2.2" data-path="cleaning.html"><a href="cleaning.html#remove-unwanted-responses"><i class="fa fa-check"></i><b>8.2.2</b> Remove unwanted responses</a></li>
<li class="chapter" data-level="8.2.3" data-path="cleaning.html"><a href="cleaning.html#remove-unwanted-variables"><i class="fa fa-check"></i><b>8.2.3</b> Remove unwanted variables</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="cleaning.html"><a href="cleaning.html#joining-data-frames"><i class="fa fa-check"></i><b>8.3</b> Joining data frames</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="cleaning.html"><a href="cleaning.html#writedata"><i class="fa fa-check"></i><b>8.3.1</b> Write data to disk</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="cleaning.html"><a href="cleaning.html#simplifying-code-with-data-pipes"><i class="fa fa-check"></i><b>8.4</b> Simplifying Code with Data Pipes</a></li>
<li class="chapter" data-level="8.5" data-path="cleaning.html"><a href="cleaning.html#quiz-4-cleaning-data"><i class="fa fa-check"></i><b>8.5</b> Quiz 4: Cleaning Data</a></li>
<li class="chapter" data-level="8.6" data-path="cleaning.html"><a href="cleaning.html#further-study-5"><i class="fa fa-check"></i><b>8.6</b> Further Study</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="customers.html"><a href="customers.html"><i class="fa fa-check"></i><b>9</b> Exploring the Customer Experience</a>
<ul>
<li class="chapter" data-level="9.1" data-path="customers.html"><a href="customers.html#consumer-involvement"><i class="fa fa-check"></i><b>9.1</b> Consumer Involvement</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="customers.html"><a href="customers.html#methodology"><i class="fa fa-check"></i><b>9.1.1</b> Methodology</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="customers.html"><a href="customers.html#missing-data"><i class="fa fa-check"></i><b>9.2</b> Missing Data</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="customers.html"><a href="customers.html#imputation"><i class="fa fa-check"></i><b>9.2.1</b> Imputation</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="customers.html"><a href="customers.html#preparing-the-involvement-data"><i class="fa fa-check"></i><b>9.3</b> Preparing the Involvement Data</a></li>
<li class="chapter" data-level="9.4" data-path="customers.html"><a href="customers.html#tidy-data"><i class="fa fa-check"></i><b>9.4</b> Tidy Data</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="customers.html"><a href="customers.html#explore-the-results"><i class="fa fa-check"></i><b>9.4.1</b> Explore the results</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="customers.html"><a href="customers.html#quiz-5-transforming-data"><i class="fa fa-check"></i><b>9.5</b> Quiz 5: Transforming data</a></li>
<li class="chapter" data-level="9.6" data-path="customers.html"><a href="customers.html#quiz-5-transforming-data-1"><i class="fa fa-check"></i><b>9.6</b> Quiz 5: Transforming data</a></li>
<li class="chapter" data-level="9.7" data-path="customers.html"><a href="customers.html#further-study-6"><i class="fa fa-check"></i><b>9.7</b> Further Study</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html"><i class="fa fa-check"></i><b>10</b> Analysing the customer experience</a>
<ul>
<li class="chapter" data-level="10.1" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#the-reliability-and-validity-of-surveys"><i class="fa fa-check"></i><b>10.1</b> The Reliability and Validity of Surveys</a></li>
<li class="chapter" data-level="10.2" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#correlations"><i class="fa fa-check"></i><b>10.2</b> Correlations</a></li>
<li class="chapter" data-level="10.3" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#hierarchical-clustering-to-assess-validity"><i class="fa fa-check"></i><b>10.3</b> Hierarchical Clustering to assess validity</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#pre-processing"><i class="fa fa-check"></i><b>10.3.1</b> Pre-processing</a></li>
<li class="chapter" data-level="10.3.2" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#scaling"><i class="fa fa-check"></i><b>10.3.2</b> Scaling</a></li>
<li class="chapter" data-level="10.3.3" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#distances"><i class="fa fa-check"></i><b>10.3.3</b> Distances</a></li>
<li class="chapter" data-level="10.3.4" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#clustering"><i class="fa fa-check"></i><b>10.3.4</b> Clustering</a></li>
<li class="chapter" data-level="10.3.5" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#interpreting-the-results"><i class="fa fa-check"></i><b>10.3.5</b> Interpreting the Results</a></li>
<li class="chapter" data-level="10.3.6" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#clustering-the-involvement-data"><i class="fa fa-check"></i><b>10.3.6</b> Clustering the Involvement Data</a></li>
<li class="chapter" data-level="10.3.7" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#other-techniques"><i class="fa fa-check"></i><b>10.3.7</b> Other techniques</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#reviewing-the-personal-involvement-index"><i class="fa fa-check"></i><b>10.4</b> Reviewing the Personal Involvement Index</a></li>
<li class="chapter" data-level="10.5" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#quiz"><i class="fa fa-check"></i><b>10.5</b> Quiz</a></li>
<li class="chapter" data-level="10.6" data-path="analysing-the-customer-experience.html"><a href="analysing-the-customer-experience.html#further-study-7"><i class="fa fa-check"></i><b>10.6</b> Further study</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="reporting.html"><a href="reporting.html"><i class="fa fa-check"></i><b>11</b> Writing Reports</a>
<ul>
<li class="chapter" data-level="11.1" data-path="reporting.html"><a href="reporting.html#creating-documents-with-rmarkdown"><i class="fa fa-check"></i><b>11.1</b> Creating documents with RMarkdown</a></li>
<li class="chapter" data-level="11.2" data-path="reporting.html"><a href="reporting.html#survey-items"><i class="fa fa-check"></i><b>11.2</b> Survey Items</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="reporting.html"><a href="reporting.html#customer-characteristics"><i class="fa fa-check"></i><b>11.2.1</b> Customer characteristics</a></li>
<li class="chapter" data-level="11.2.2" data-path="reporting.html"><a href="reporting.html#service-quality"><i class="fa fa-check"></i><b>11.2.2</b> Service quality</a></li>
<li class="chapter" data-level="11.2.3" data-path="reporting.html"><a href="reporting.html#technical-quality"><i class="fa fa-check"></i><b>11.2.3</b> Technical Quality</a></li>
<li class="chapter" data-level="11.2.4" data-path="reporting.html"><a href="reporting.html#functional-quality-questions"><i class="fa fa-check"></i><b>11.2.4</b> Functional Quality Questions</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="reporting.html"><a href="reporting.html#mini-hackathon-1"><i class="fa fa-check"></i><b>11.3</b> Mini Hackathon</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="reporting.html"><a href="reporting.html#data-cleaning"><i class="fa fa-check"></i><b>11.3.1</b> Data Cleaning</a></li>
<li class="chapter" data-level="11.3.2" data-path="reporting.html"><a href="reporting.html#data-exploration"><i class="fa fa-check"></i><b>11.3.2</b> Data Exploration</a></li>
<li class="chapter" data-level="11.3.3" data-path="reporting.html"><a href="reporting.html#data-analysis"><i class="fa fa-check"></i><b>11.3.3</b> Data Analysis</a></li>
<li class="chapter" data-level="11.3.4" data-path="reporting.html"><a href="reporting.html#write-a-report"><i class="fa fa-check"></i><b>11.3.4</b> Write a report</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="close.html"><a href="close.html"><i class="fa fa-check"></i><b>12</b> In Closing</a>
<ul>
<li class="chapter" data-level="12.1" data-path="close.html"><a href="close.html#searching-for-answers"><i class="fa fa-check"></i><b>12.1</b> Searching for answers</a></li>
<li class="chapter" data-level="12.2" data-path="close.html"><a href="close.html#forums"><i class="fa fa-check"></i><b>12.2</b> Forums</a></li>
<li class="chapter" data-level="12.3" data-path="close.html"><a href="close.html#further-study-8"><i class="fa fa-check"></i><b>12.3</b> Further Study</a></li>
<li class="chapter" data-level="12.4" data-path="close.html"><a href="close.html#thanks"><i class="fa fa-check"></i><b>12.4</b> Thanks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a>
<ul>
<li class="chapter" data-level="12.5" data-path="appendix.html"><a href="appendix.html#quiz1"><i class="fa fa-check"></i><b>12.5</b> Answers to Quiz 1</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="appendix.html"><a href="appendix.html#question-1"><i class="fa fa-check"></i><b>12.5.1</b> Question 1</a></li>
<li class="chapter" data-level="12.5.2" data-path="appendix.html"><a href="appendix.html#question-2"><i class="fa fa-check"></i><b>12.5.2</b> Question 2</a></li>
<li class="chapter" data-level="12.5.3" data-path="appendix.html"><a href="appendix.html#question-3"><i class="fa fa-check"></i><b>12.5.3</b> Question 3</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="appendix.html"><a href="appendix.html#quiz2"><i class="fa fa-check"></i><b>12.6</b> Answers to Quiz 2</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="appendix.html"><a href="appendix.html#question-1-1"><i class="fa fa-check"></i><b>12.6.1</b> Question 1</a></li>
<li class="chapter" data-level="12.6.2" data-path="appendix.html"><a href="appendix.html#question-2-1"><i class="fa fa-check"></i><b>12.6.2</b> Question 2</a></li>
<li class="chapter" data-level="12.6.3" data-path="appendix.html"><a href="appendix.html#question-3-1"><i class="fa fa-check"></i><b>12.6.3</b> Question 3</a></li>
<li class="chapter" data-level="12.6.4" data-path="appendix.html"><a href="appendix.html#question-4"><i class="fa fa-check"></i><b>12.6.4</b> Question 4</a></li>
<li class="chapter" data-level="12.6.5" data-path="appendix.html"><a href="appendix.html#question-5"><i class="fa fa-check"></i><b>12.6.5</b> Question 5</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="appendix.html"><a href="appendix.html#answers-to-quiz-3"><i class="fa fa-check"></i><b>12.7</b> Answers to Quiz 3</a></li>
<li class="chapter" data-level="12.8" data-path="appendix.html"><a href="appendix.html#answers-to-quiz-4"><i class="fa fa-check"></i><b>12.8</b> Answers to Quiz 4</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://peterprevos.com/" target="blank">Dr Peter Prevos</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science for Water Professionals - Create Value from Data with the R Language</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Exploring Data with the Tidyverse Packages</h1>
<p>Now that we have covered the basics of the R language, it is time to analyse some data. The next four sessions use water quality data from a reticulation network which we analyse for compliance with regulations.</p>
<p>This chapter has the following learning objectives:</p>
<ul>
<li>Understand the principles of R packages</li>
<li>Load and describe a CSV data set</li>
<li>Summarise rectangular data</li>
</ul>
<p>The data and code for this session are available in the <code>chapter_04.R</code> file in the <code>casestudy1</code> folder of your RStudio project.</p>
<div id="r-libraries" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> R Libraries</h2>
<p>One of the most powerful features of the R language is that developers can write extensions, the so-called packages. R has a large community of users who develop code and make it freely available to other users.</p>
<p>Thousands of specialised packages are available that undertake a vast range of complex tasks. You can, for example, use R as a GIS and analyse spatial data, or implement machine learning. Other packages help you to access data from various sources, such as SQL databases. R packages can also help you present the results of your analysis as a presentation, report or interactive dashboard.</p>
<p>The majority of R packages are available on <a href="https://cran.r-project.org/">CRAN</a>, the <em>Comprehensive R Archive Network</em>. You can install packages in R with the <code>install.packages()</code> function. Within RStudio, you install packages in the <em>Tools</em> menu. When you install a package, RStudio downloads a library of files and stores them for future use. The words package and library are sometimes used interchangeably. In R, a package is a collection of R functions, data and compiled code. The location where the packages are stored is called the library.</p>
<p>The CRAN repository contains many packages with specific functionality to analyse water, some of which are:</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/baytrends/index.html">baytrends</a>: Long Term Water Quality Trend Analysis.</li>
<li><a href="https://cran.r-project.org/web/packages/biotic/index.html">biotic</a>: Calculation of Freshwater Biotic Indices.</li>
<li><a href="https://cran.r-project.org/web/packages/CityWaterBalance/index.html">CityWaterBalance</a>: Track Flows of Water Through an Urban System.</li>
<li><a href="https://cran.r-project.org/web/packages/driftR/index.html">driftR</a>: Drift Correcting Water Quality Data.</li>
<li><a href="https://cran.r-project.org/web/packages/EmiStatR/index.html">EmiStatR</a>: Emissions and Statistics in R for Wastewater and Pollutants in Combined Sewer Systems.</li>
</ul>
<p>Each package has formal documentation, and some packages have vignettes, which explain how to use the specific functions in a bit more detail.</p>
</div>
<div id="introducing-the-tidyverse" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Introducing the Tidyverse</h2>
<p>One of the most popular collections of R packages for analysing data is the <a href="https://www.tidyverse.org/">Tidyverse</a>, developed by R guru Hadley Wickham and many others. Doing ‘tidy’ data science is a style of coding that has a strong following. Tidy data science relates to writing code and cleaning data in a way that promotes reproducibility.</p>
<p>The Tidyverse packages provide enhanced functionality to extract, transform, visualise and analyse data. The features offered by these packages are more versatile, easier to use and understand than the base R code.</p>
<p>Computer scientists call software like the Tidyverse ’syntactic sugar‘, which means that it simplifies the syntax</p>
<blockquote>
<p>Install the Tidyverse collection of packages using <code>install.packages("tidyverse")</code>.</p>
</blockquote>
<p>Installing the complete Tidyverse can take a little while. If you are working with the desktop version, make sure you have sufficient access rights to install and run the packages.</p>
<p>After you install a package, you need to initialise it with the <code>library()</code> function. When you execute <code>library(tidyverse)</code>, the console will show confirmation of the loaded packages. You can ignore the conflicts at the end. These warnings relate to functions that override existing functionality.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="tidyverse.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
## ✓ tibble  3.1.5     ✓ dplyr   1.0.7
## ✓ tidyr   1.1.4     ✓ stringr 1.4.0
## ✓ readr   2.0.2     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>When you initiate the Tidyverse library, the following packages are loaded by default:</p>
<ul>
<li><a href="https://dplyr.tidyverse.org/">dplyr</a>: Manipulating and analysing data.</li>
<li><a href="https://ggplot2.tidyverse.org/">ggplot2</a>: Visualise data.</li>
<li><a href="https://forcats.tidyverse.org/">forcats</a>: Working with factor variables.</li>
<li><a href="https://purrr.tidyverse.org/">purrr</a>: Functional programming.</li>
<li><a href="https://readr.tidyverse.org/">readr</a>: Read and write read rectangular data (like csv).</li>
<li><a href="https://stringr.tidyverse.org/">stringr</a>: Manipulate text.</li>
<li><a href="https://tibble.tidyverse.org/">tibble</a>: Working with rectangular data (tables).</li>
<li><a href="https://tidyr.tidyverse.org/">tidyr</a>: Data transformation.</li>
</ul>
<p>Many other packages are available that follow the principles of the Tidyverse.</p>
<p>The Tidyverse developers frequently update the software. You can see if updates are available, and optionally install them, by running <code>tidyverse_update()</code>. You can also upgrade packages in the <em>Tools &gt; Check for Package Updates</em> menu in RStudio.</p>
</div>
<div id="case-study-1" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Case Study 1</h2>
<p>The first case study looks at water quality data in the eleven towns on the island of Gormsey. Each town has a set of sample points at the customer tap. Gormsey’s laboratory regularly samples these taps and tests the water for a range of parameters. The laboratory stores all results in a CSV file, which we use for this case study. In reality, water utilities sample hundreds of different parameters at different frequencies at the water treatment plant and the water network. Analysing this data is a common activity for water professionals. The data for this case study only contains three parameters.</p>
<p>This file contains samples for <a href="https://en.wikipedia.org/wiki/Turbidity">turbidity</a>, <a href="https://en.wikipedia.org/wiki/Escherichia_coli">Escherichia coli</a> and <a href="https://en.wikipedia.org/wiki/Trihalomethane">trihalomethanes</a> (THMs).</p>
<p>E Coli is a coliform bacterium that can cause gastroenteritis. THMs are a group of chemical compounds that are predominantly formed as a by-product when chlorine is used to disinfect drinking water. Long-term exposure to high level of these by-products can cause diseases such as cancer. Turbidity is a measure of the cloudiness of a liquid. It is not only a measure of the aesthetics of drinking water, it is also a indicator for other issues.</p>
<figure>
<div style="position: relative; width: 100%; height: 0; margin-top: 3em; padding-bottom: 56.25%;">
<iframe width="560" height="315" src="https://www.youtube.com/embed/qz8xHQJw6qY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
</iframe>
</div>
<figcaption style="margin-top:6px; margin-bottom:1em;">
<i>Turbidity measurement.</i>
</figcaption>
</figure>
</div>
<div id="exploring-the-case-study-data" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Exploring the Case Study Data</h2>
<p>The first step to undertake when you receive a new data set is to explore and review its content. Before we start exploring this data, we need to load the Tidyverse collection of packages with the function call <code>library(tidyverse)</code>. If we don’t do this first, R will not recognise most of the functions we will be using.</p>
<figure>
<div style="position: relative; width: 100%; height: 0; margin-top: 3em; padding-bottom: 56.25%;">
<iframe width="560" height="315" src="https://www.youtube.com/embed/vPwsrMhoLY8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
</iframe>
</div>
<figcaption style="margin-top:6px; margin-bottom:1em;">
<i>Chapter 4 screencast.</i>
</figcaption>
</figure>
<p>The <em>readr</em> package of the Tidyverse contains functions to read and write CSV files. R also has a base function to read csv files, but the Tidyverse alternative is faster and better able to assign the correct data format. You can load the data with the <code>read_csv()</code> function.</p>
<blockquote>
<p>Create an R script and copy and evaluate the code as you read through this chapter.</p>
</blockquote>
<p>The best way to learn is to type the expressions in this chapter as you read the text or view the video. A productive way to comprehend the information is to change the examples and study the output.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="tidyverse.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb27-2"><a href="tidyverse.html#cb27-2" aria-hidden="true" tabindex="-1"></a>gormsey <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;casestudy1/gormsey.csv&quot;</span>)</span></code></pre></div>
<p>The text between quotation marks is the path to the file and its name. Note that R uses the forward-slash <code>/</code>, common in Unix systems, and not the Windows backslash (<code>\</code>) to form a path. Every R session has a working directory, and all paths are relative to that folder. When you work in a project, RStudio saves the working directory for future sessions.</p>
<p>You can find see the current working directory with the <code>getwd()</code> function, which you can run in the console. Without a working directory, you would have to specify the complete path, such as:</p>
<p><code>C:/Users/peterp/Documents/r4h2o/casestudy2/gormsey.csv</code>.</p>
<p>In this example, the working directory is <code>C:/Users/peterp/Documents/r4h2o/</code>. Using an RStudio project saves you having to type this every time.</p>
<p>The <code>read_csv()</code> function assumes that the first row contains the field names and the following rows contain the data, organised in columns. After you type the quotation marks, you can use the tab button to select a file.</p>
<p>This function has many options you can use to fine-tune how R reads the data. The most common option is <code>skip = n</code>, which instructs the function to ignore the first <code>n</code> rows. This is useful because many CSV files contain metadata in the first few rows.</p>
<p>After loading the data, R shows a summary. In this example, we have seven columns in various data formats. The double format are numbers. The data also contains a date and some character values.</p>
<p>The <code>gormsey</code> variable is now visible in the <em>Environment</em> tab. The <code>gormsey</code> variable is a data frame, which is a tabular set of data with rows (observations) and columns (variables), very much like a spreadsheet. Within the Tidyverse, a data frame is called a <em>Tibble</em>. This quaint term is a reference to the New Zealand accent of the leading developer of this software, Hadley Wickham. Tibbles have the same properties as a data frame but have some extended capabilities to make life easier. The words data-frame and tibble are used interchangeably.</p>
<p>The data is read into memory and any changes you make to the data are not written to disk unless you explicitly do so. Changing the raw data on disk is not good practice as you want to be able to reproduce your analysis.</p>
<p>Each column is a variable, which is also called a data field or a parameter. Each row holds an observation or a measurement. The table below shows two rows of the data frame.</p>
<table>
<caption><span id="tab:unnamed-chunk-22">Table 4.1: </span>First rows of the Gormsey data.</caption>
<thead>
<tr class="header">
<th align="right">Sample_No</th>
<th align="left">Date</th>
<th align="left">Sample_Point</th>
<th align="left">Town</th>
<th align="left">Measure</th>
<th align="right">Result</th>
<th align="left">Units</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">662866</td>
<td align="left">2018-08-16</td>
<td align="left">WA_12904</td>
<td align="left">Wakefield</td>
<td align="left">Turbidity</td>
<td align="right">0.300</td>
<td align="left">NTU</td>
</tr>
<tr class="even">
<td align="right">612571</td>
<td align="left">2018-08-16</td>
<td align="left">SN_14788</td>
<td align="left">Snake’s Canyon</td>
<td align="left">Turbidity</td>
<td align="right">0.100</td>
<td align="left">NTU</td>
</tr>
<tr class="odd">
<td align="right">693558</td>
<td align="left">2018-08-16</td>
<td align="left">SW_10554</td>
<td align="left">Swadlincote</td>
<td align="left">Turbidity</td>
<td align="right">0.200</td>
<td align="left">NTU</td>
</tr>
<tr class="even">
<td align="right">639297</td>
<td align="left">2018-08-16</td>
<td align="left">PA_17864</td>
<td align="left">Paethsmouth</td>
<td align="left">Turbidity</td>
<td align="right">0.100</td>
<td align="left">NTU</td>
</tr>
<tr class="odd">
<td align="right">627538</td>
<td align="left">2018-08-16</td>
<td align="left">ST_10485</td>
<td align="left">Strathmore</td>
<td align="left">Turbidity</td>
<td align="right">0.100</td>
<td align="left">NTU</td>
</tr>
<tr class="even">
<td align="right">622001</td>
<td align="left">2018-08-15</td>
<td align="left">ME_13895</td>
<td align="left">Merton</td>
<td align="left">THM</td>
<td align="right">0.015</td>
<td align="left">mg/L</td>
</tr>
</tbody>
</table>
<p>The data for this case study uses synthetic (simulated) laboratory data. The data in this case study has the following fields:</p>
<ul>
<li><code>Sample_No</code>: Reference number of the sample.</li>
<li><code>Date_Sampled</code>: The sampling date.</li>
<li><code>Sample_Point</code>: The reference number of the sample point.</li>
<li><code>Town</code>: The town in Gormsey.</li>
<li><code>Measure</code>: The type of measurement.</li>
<li><code>Result</code>: The result of the laboratory test.</li>
<li><code>Units</code>: The units of the result (NTU, mg/l or orgs/100ml).</li>
</ul>
<p>Each of these columns within a data frame is a vector, like the ones we saw in the previous session. All data frames are rectangular, which means that all vectors in a data frame have the same length.</p>
<p>R can read many types of data. Some specialised extensions can connect R to Excel spreadsheets, SQL databases, scrape data from websites, GIS layers, and many other sources.</p>
<p>Spreadsheets are not ideal sources for corporate data. Nevertheless, many organisations maintain spreadsheets as their single source of truth. If a spreadsheet is indeed your only solution to store data, you should stick to some simple rules to be able to easily use it in R, or any other data science package:</p>
<ul>
<li>Use only the top row as a header.</li>
<li>Don’t use colours to indicate values.</li>
<li>Prevent using spaces in column names.</li>
<li>Don’t add any calculations in the data tab.</li>
<li>Every cell should be a data point or remain empty.</li>
</ul>
<p>Following these guidelines, you can store your data in a clean way that simplifies analysing the results with R, or any other analytical software.</p>
<div id="inspect-the-data" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Inspect the data</h3>
<p>The next step is to inspect the data. When you type the name of the variable in the console, RStudio only displays the first ten rows. Any columns that don’t fit on the screen are truncated.</p>
<p>The <code>names()</code> function displays all names of the columns as a vector of characters.</p>
<p>The <code>dim()</code> function shows the number of rows and columns in a data frame.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="tidyverse.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(gormsey)</span></code></pre></div>
<pre><code>## [1] &quot;Sample_No&quot;    &quot;Date&quot;         &quot;Sample_Point&quot; &quot;Town&quot;         &quot;Measure&quot;     
## [6] &quot;Result&quot;       &quot;Units&quot;</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="tidyverse.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(gormsey)</span></code></pre></div>
<pre><code>## [1] 2879    7</code></pre>
<blockquote>
<p>Use the <code>nrow()</code> and <code>ncol()</code> functions on the Gormsey data. What does it show?</p>
</blockquote>
<p>Answer: The <code>nrow()</code> and <code>ncol()</code> functions list the number of rows and columns for a data frame. The result of each function call is a single number. The <code>dim()</code> function shows both results in a vector of two numbers.</p>
</div>
<div id="explore-the-data" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Explore the data</h3>
<p>We now know how much data we have and what type of information it contains. R and the Tidyverse also have several functions to view the content of a data frame.</p>
<p>When you type the name of a variable in the console, R will show you the data. With large sets, the results will very quickly scroll through the screen. The Tidyverse will only show the first few rows of a data frame or Tibble and truncates any columns that don’t fit on the screen.</p>
<p>The Tidyverse function to summarise a data frame is <code>glimpse()</code>. When executing this function on the Gormsey data, we see:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="tidyverse.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(gormsey)</span></code></pre></div>
<pre><code>## Rows: 2,879
## Columns: 7
## $ Sample_No    &lt;dbl&gt; 662866, 612571, 693558, 639297, 627538, 622001, 671350, 6…
## $ Date         &lt;date&gt; 2018-08-16, 2018-08-16, 2018-08-16, 2018-08-16, 2018-08-…
## $ Sample_Point &lt;chr&gt; &quot;WA_12904&quot;, &quot;SN_14788&quot;, &quot;SW_10554&quot;, &quot;PA_17864&quot;, &quot;ST_10485…
## $ Town         &lt;chr&gt; &quot;Wakefield&quot;, &quot;Snake&#39;s Canyon&quot;, &quot;Swadlincote&quot;, &quot;Paethsmout…
## $ Measure      &lt;chr&gt; &quot;Turbidity&quot;, &quot;Turbidity&quot;, &quot;Turbidity&quot;, &quot;Turbidity&quot;, &quot;Turb…
## $ Result       &lt;dbl&gt; 0.300, 0.100, 0.200, 0.100, 0.100, 0.015, 0.011, 0.100, 0…
## $ Units        &lt;chr&gt; &quot;NTU&quot;, &quot;NTU&quot;, &quot;NTU&quot;, &quot;NTU&quot;, &quot;NTU&quot;, &quot;mg/L&quot;, &quot;mg/L&quot;, &quot;NTU&quot;,…</code></pre>
<p>The <code>glimpse()</code> function shows the number of rows and columns, the names of the variables, their types and the first few data points. You can also obtain this information by clicking on the triangle next to the variable name in the Environment tab in RStudio.</p>
<p>The <code>View()</code> function (note the capital V) opens the data in a separate read-only window. This function is the most convenient way to inspect data visually. You can also view the data this way by clicking on the variable name in the Environment tab. You cannot edit the data, but you can sort the information by column by clicking on the variable name.</p>
</div>
<div id="explore-variables" class="section level3" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Explore variables</h3>
<p>To view any of the variables within a data frame, you need to add the column name after a <code>$</code>, e.g. <code>gormsey$Result</code>. When you execute this command, R shows a vector of the observations within this variable. You can use this vector in calculations, as explained in the previous session.</p>
<p>If you want to use only a subset of a vector, you can indicate the index number between square brackets. For example: <code>gormsey$Results[1:10]</code> shows the first ten results.</p>
<p>R has various ways to view or analyse a subset of the data. The most basic approach is to add the number of the row and column between square brackets. For example, <code>turbidity[1:10, 4:5]</code> shows the first ten rows and the fourth and fifth variable. When there is no value in either the place for the rows or the columns, R shows all values.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="tidyverse.html#cb34-1" aria-hidden="true" tabindex="-1"></a>gormsey[, <span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>]  <span class="do">## Show all rows with column four and five</span></span></code></pre></div>
<pre><code>## # A tibble: 2,879 × 2
##    Town           Measure  
##    &lt;chr&gt;          &lt;chr&gt;    
##  1 Wakefield      Turbidity
##  2 Snake&#39;s Canyon Turbidity
##  3 Swadlincote    Turbidity
##  4 Paethsmouth    Turbidity
##  5 Strathmore     Turbidity
##  6 Merton         THM      
##  7 Swadlincote    THM      
##  8 Merton         Turbidity
##  9 Pontybridge    Turbidity
## 10 Southwold      Turbidity
## # … with 2,869 more rows</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="tidyverse.html#cb36-1" aria-hidden="true" tabindex="-1"></a>gormsey[<span class="dv">12</span><span class="sc">:</span><span class="dv">18</span>, ] <span class="do">## Show all variables for row 12 to 18</span></span></code></pre></div>
<pre><code>## # A tibble: 7 × 7
##   Sample_No Date       Sample_Point Town        Measure   Result Units     
##       &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     
## 1    622387 2018-08-16 PA_17864     Paethsmouth THM        0.028 mg/L      
## 2    674789 2018-08-16 BL_17892     Blancathey  E. coli    0     Orgs/100mL
## 3    692855 2018-10-04 SO_15547     Southwold   Turbidity  0.2   NTU       
## 4    674202 2018-10-08 TA_15690     Tarnstead   E. coli    0     Orgs/100mL
## 5    693725 2018-06-28 PA_15640     Paethsmouth E. coli    0     Orgs/100mL
## 6    603933 2018-06-28 PO_14145     Pontybridge E. coli    0     Orgs/100mL
## 7    676030 2018-06-28 BL_10936     Blancathey  E. coli    0     Orgs/100mL</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="tidyverse.html#cb38-1" aria-hidden="true" tabindex="-1"></a>gormsey<span class="sc">$</span>Date[<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>] <span class="do">## Show the first 12 values in the Date variable</span></span></code></pre></div>
<pre><code>##  [1] &quot;2018-08-16&quot; &quot;2018-08-16&quot; &quot;2018-08-16&quot; &quot;2018-08-16&quot; &quot;2018-08-16&quot;
##  [6] &quot;2018-08-15&quot; &quot;2018-09-06&quot; &quot;2018-08-15&quot; &quot;2018-08-16&quot; &quot;2018-08-16&quot;
## [11] &quot;2018-08-16&quot; &quot;2018-08-16&quot;</code></pre>
<p>This syntax can also include the names of variables, e.g. <code>gormsey[1:10, c("Town", "Result")]</code> shows the first ten rows of the Town and the Result variables.</p>
<p>You can subset a vector data frame by adding an index number between square brackets. For vectors, you add one number to indicate the element number. For a data frame, you use two numbers: <code>[rows, columns]</code>. When you omit either the row or column number, R shows all available rows or columns.</p>
<p>Besides numerical values, you can also add formulas as indices, for example: <code>gormsey[, n * 2]</code>. Please note that R is a mathematical language and the index numbers thus start at one. In generic programming languages, the index starts at zero.</p>
<blockquote>
<p>What is the result of the last sample in the Gormsey data? Hint, use the <code>nrow()</code> function.</p>
</blockquote>
<p>Answer:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="tidyverse.html#cb40-1" aria-hidden="true" tabindex="-1"></a>gormsey<span class="sc">$</span>Result[<span class="fu">nrow</span>(gormsey)]</span></code></pre></div>
<pre><code>## [1] 0.009</code></pre>
</div>
<div id="filtering-data" class="section level3" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Filtering data</h3>
<p>You can also filter the data using conditions. If, for example, you like to see only the turbidity data, then you can subset the data:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="tidyverse.html#cb42-1" aria-hidden="true" tabindex="-1"></a>gormsey[gormsey<span class="sc">$</span>Measure <span class="sc">==</span> <span class="st">&quot;Turbidity&quot;</span>, ]</span></code></pre></div>
<p>This method looks similar to what we discussed above. The difference is that the row indicator now shows an equation. When you execute the equation between brackets separately, you see a list of values that are either <code>TRUE</code> or <code>FALSE</code>. These values indicate whether the variable at that location meets the condition. For example, the following code results in a vector with the values <code>TRUE</code> and <code>FALSE</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="tidyverse.html#cb43-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb43-2"><a href="tidyverse.html#cb43-2" aria-hidden="true" tabindex="-1"></a>a <span class="sc">==</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1]  TRUE FALSE</code></pre>
<p>Variables that are either TRUE or FALSE are called boolean or logical, and they are the building blocks of computer science. These variables are useful to indicate conditions and can also be used in calculations. The code below results in a vector with the values 2 and 0.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="tidyverse.html#cb45-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb45-2"><a href="tidyverse.html#cb45-2" aria-hidden="true" tabindex="-1"></a>a <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 2 0</code></pre>
<p>You can also use all the common relational operators to test for complex conditions:</p>
<ul>
<li><code>x &lt; y</code> less than</li>
<li><code>x &gt; y</code> greater than</li>
<li><code>x &lt;= y</code> less than or equal to</li>
<li><code>x &gt;= y</code> greater than or equal to</li>
<li><code>x == y</code> equal to each other</li>
<li><code>x != y</code> not equal to each other</li>
</ul>
<p>R also evaluates relations between character strings, using alphabetical order. In R, <code>"small" &gt; "large"</code> results in TRUE because <em>s</em> comes after <em>l</em>.</p>
<p>You can build elaborate conditionals by combining more than one condition with logical operations. Some of the most common options are:</p>
<ul>
<li><code>! x</code>: not <code>x</code>$</li>
<li><code>x &amp; y</code>: logical and (<code>x</code>$ AND <code>y</code>$)</li>
<li><code>x | y</code>: logical or (<code>x</code>$ OR <code>y</code>$)</li>
</ul>
<p>An example of a logical operation would be the expression <code>"small" &gt; "large" &amp; 1 == 2</code>, which results in <code>FALSE</code> because the first condition is true, but the second one is false, so they are not both true.</p>
<p>The Tidyverse method uses the <code>filter()</code> function, which is more convenient than using square brackets. The first parameter in this function is the data frame you need to filter, and the second parameter is the condition.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="tidyverse.html#cb47-1" aria-hidden="true" tabindex="-1"></a>turbidity <span class="ot">&lt;-</span> <span class="fu">filter</span>(gormsey, Measure <span class="sc">==</span> <span class="st">&quot;Turbidity&quot;</span>)</span></code></pre></div>
<p>Note that this method is tidier than the brackets method because we don’t have to add the data frame name and <code>$</code> to the variables. Figure <a href="tidyverse.html#fig:filter">4.1</a> illustrates the principles of filtering a data frame.</p>
<div class="figure"><span style="display:block;" id="fig:filter"></span>
<img src="images/filter.png" alt="Filtering a data frame: `filter(gormsey, Measure == &quot;Turbidity&quot;)`" width="100%" />
<p class="caption">
Figure 4.1: Filtering a data frame: <code>filter(gormsey, Measure == "Turbidity")</code>
</p>
</div>
<p>We can apply this knowledge to our case study to test subsets of the data: <code>filter(gormsey, Town == "Strathmore" &amp; Measure == "Turbidity" &amp; Result &gt; 1)</code> shows the turbidity samples in Strathmore with a result greater than 1 NTU. Note that testing for equality requires two equal signs.</p>
<blockquote>
<p>How many turbidity results in all Towns, except Strathmore, are lower than 0.1 NTU?</p>
</blockquote>
<p>Answer: Subset the data for all results less than 0.1 NTU <em>and</em> where the Town is not Strathmore. The <code>nrow()</code> function counts the results: <code>nrow(filter(gormsey, Town != "Strathmore" &amp; Result &lt; 0.1))</code>.</p>
</div>
<div id="counting-results" class="section level3" number="4.4.5">
<h3><span class="header-section-number">4.4.5</span> Counting results</h3>
<p>The last exploratory activity to be discussed is to count the number of results. The <code>table()</code> function in base R lets you quickly view the content of a data frame or a vector. To find out how many samples each measure has, you can use:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="tidyverse.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(gormsey<span class="sc">$</span>Measure)</span></code></pre></div>
<pre><code>## 
##   E. coli       THM Turbidity 
##      1470       264      1145</code></pre>
<p>The Tidyverse equivalent of this function is <code>count()</code>. The equivalent of the previous example is <code>count(gormsey, measure)</code>. Note the difference in syntax. The first argument in the function is the data frame, and the second is the variable we want to count. We can now combine these functions to create a table of the number of turbidity results for each Town. First, we create a subset of the data, and then we count the results. The output of this function is a new data frame with the results of the count.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="tidyverse.html#cb50-1" aria-hidden="true" tabindex="-1"></a>turbidity_count <span class="ot">&lt;-</span> <span class="fu">count</span>(turbidity, Town)</span>
<span id="cb50-2"><a href="tidyverse.html#cb50-2" aria-hidden="true" tabindex="-1"></a>turbidity_count</span></code></pre></div>
<pre><code>## # A tibble: 11 × 2
##    Town               n
##    &lt;chr&gt;          &lt;int&gt;
##  1 Bellmoral        104
##  2 Blancathey       104
##  3 Merton           104
##  4 Paethsmouth      104
##  5 Pontybridge      104
##  6 Snake&#39;s Canyon   104
##  7 Southwold        104
##  8 Strathmore       104
##  9 Swadlincote      104
## 10 Tarnstead        105
## 11 Wakefield        104</code></pre>
<p>Two further useful functions are <code>length()</code> and <code>unique()</code>. These two functions result in the length of a vector and the distinct values within a vector.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="tidyverse.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(gormsey<span class="sc">$</span>Measure)</span></code></pre></div>
<pre><code>## [1] 2879</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="tidyverse.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(gormsey<span class="sc">$</span>Measure)</span></code></pre></div>
<pre><code>## [1] &quot;Turbidity&quot; &quot;THM&quot;       &quot;E. coli&quot;</code></pre>
</div>
</div>
<div id="quiz-2-exploring-water-quality-data" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Quiz 2: Exploring Water Quality Data</h2>
<p>You now have reviewed a series of functions that you can use to load and explore the laboratory data. With this knowledge, you can complete the next five quiz questions.</p>
<p>Load the Gormsey water quality data from the first case study and answer these five questions. You can use any of the following functions:</p>
<ul>
<li><code>nrow()</code>: Count the number of rows in a data frame</li>
<li><code>glimpse()</code>: Summarise the content of a data frame</li>
<li><code>filter()</code>: Filter a data frame by a condition</li>
<li><code>unique()</code>: Show the distinct values for a vector</li>
<li><code>length()</code>: Count the number of elements in a vector.</li>
</ul>
<blockquote>
<p>How many results does the Gormsey data contain?</p>
</blockquote>
<ol style="list-style-type: lower-alpha">
<li>7</li>
<li>2879</li>
<li>516</li>
<li>3</li>
</ol>
<blockquote>
<p>How many E. coli results were recorded in Gormsey?</p>
</blockquote>
<ol style="list-style-type: lower-alpha">
<li>1145</li>
<li>1470</li>
<li>264</li>
<li>2879</li>
</ol>
<blockquote>
<p>What is the maximum turbidity measurement in Blancathey?</p>
</blockquote>
<ol style="list-style-type: lower-alpha">
<li>0.5</li>
<li>0.15</li>
<li>8.25</li>
<li>1.0</li>
</ol>
<blockquote>
<p>What is the median THM result in Swadlincote and Wakefield?</p>
</blockquote>
<ol style="list-style-type: lower-alpha">
<li>0.125</li>
<li>0.051</li>
<li>0.033</li>
<li>0.037</li>
</ol>
<blockquote>
<p>How many E Coli results breached the regulations? The limit for E Coli is 0 org/100ml.</p>
</blockquote>
<ol style="list-style-type: lower-alpha">
<li>1</li>
<li>0</li>
<li>1468</li>
<li>3</li>
</ol>
<p>That’s it for the second quiz. If you get stuck, you can find the answers in the <a href="appendix.html#quiz2">appendix</a>.</p>
</div>
<div id="further-study-2" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Further Study</h2>
<p>R can’t only read CSV files. Several R libraries provide additional functionality to read other file formats, such as:</p>
<ul>
<li><a href="https://readxl.tidyverse.org/">readxl</a>: Tidyverse package to read Excel files.</li>
<li><a href="https://cran.r-project.org/web/packages/RODBC/index.html">RODBC</a>: Interface for databases such as SQL.</li>
<li><a href="https://rvest.tidyverse.org/">rvest</a>: Tidyverse package to scrape data from websites.</li>
</ul>
<blockquote>
<p>Before you proceed to the next chapter, try and load a CSV file you use in your daily work and explore the data to practice your skills.</p>
</blockquote>
<p>The <a href="statistics.html#statistics">next chapter</a> explains how to use R and the Tidyverse to explore the data and determine whether the results are following the relevant regulations.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="statistics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/pprevos/r4h2o/edit/master/04_tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/pprevos/r4h2o/blob/master/04_tidyverse.Rmd",
"text": null
},
"download": ["r4h2o.pdf", "r4h2o.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
